# 주차 기록

날짜: 2025년 10월 14일
진도: 섹션 7: 50~59번 강의
키워드: Layout, Stateless&Statefull

<aside>
<img src="https://www.notion.so/icons/verified_red.svg" alt="https://www.notion.so/icons/verified_red.svg" width="40px" />

**What’s the point?**

- Stateful, Stateless widget의 차이점에 대해 학습
- Dart function, variables, data types 복습

---

</aside>

# 🎲Section 7 Dicee-Building Apps with State

## 50. Dicee - A Stateful Dice App

---

1️⃣ https://github.com/woojin-devv/dicee-flutter.git 클론 받아오기

2️⃣ `Get Dependencies` 눌러주고 Flutter 프로젝트 시작하기

3️⃣ `images` 폴더 안에 있는 주사위 사진 파일 확인, `pubspec.yaml`의 연결 확인

```yaml
**flutter:**
  uses-material-design: true
  **assets:
    - images/**
```

4️⃣ 실행 확인하기

![image.png](image.png)

## 51. Using the Expanded Widget to Create Flexible Layouts

---

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(
    MaterialApp(
      home: Scaffold(
        backgroundColor: Colors.red,
        appBar: AppBar(
          title: const Text('Dicee', style: TextStyle(color: Colors.white)),
          backgroundColor: Colors.red,
        ),
        body: DicePage(),
      ),
    ),
  );
}

class DicePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Row(
      children: <Widget>[
        Expanded(
          child: Image.asset('/images/dice1.png')
        ),
        Expanded(
          child: Image.asset('/images/dice2.png')
        ),
      ],
    );
  }
}

```

![Dicee.png](4ce4f5d1-a06f-4cee-bfc8-005d91062b60.png)

```yaml
Image(
  **width: 200.0,**
  image: AssetImage('images/dice1.png'),
),
```

`width`을 200.0px로 고정해 놓으면 나중에 문제가 발생할 수 있음 ⇒ Expanded Class 사용!

<aside>

### 💥 Expanded Class

: 행의 자식이나 열의 자식일 때, 주축의 공간을 채우기 위해 **팽창**하게 된다 ⇒ 화면 밖으로 이미지가 나가서 생기는 **overflow**를 방지할 수 있다!

⚠️ single child만 가질 수 있다!

```dart
class DicePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Row(
      children: <Widget>[
        **Expanded(
          child: Image(
            image: AssetImage('images/dice1.png'),
          ),
        ),
        Expanded(
          child: Image(
            image: AssetImage('images/dice2.png'),
          ),
        ),**
      ],
    );
  }
}
```

![image.png](image%201.png)

**코드 간략하게 할 수 있는 method: `Image.asset(assetName)`**

```dart
class DicePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Row(
      children: <Widget>[
        Expanded(
          child: **Image.asset('/images/dice1.png')**
        ),
        Expanded(
          child: **Image.asset('/images/dice2.png')**
        ),
      ],
    );
  }
}
```

---

<aside>
➕

**`flex`**: 화면 전체를 차지하면서, 각각이 차지하는 **비율**을 조절함으로써 위젯의 크기를 변경할 수 있는 속성 (별도로 설정하지 않으면 모든 expanded 위젯은 기본적으로 `flex=1`을 가진다)

```dart
return Row(
  children: <Widget>[
    Expanded(
	    **flex: 12,**
      child: Image(
        image: AssetImage('images/dice1.png'),
      ),
    ),
    Expanded(
	    **flex: 7,**
      child: Image(
        image: AssetImage('images/dice2.png'),
      ),
    ),
  ],
);
```

![image.png](image%202.png)

</aside>

</aside>

## 52. How to Use Intention Actions

---

**E.G. 각 주사위 이미지 주위에 16.0 padding을 추가하고 싶다면?**

1️⃣ padding을 추가하고 싶은 위젯을 클릭 ⇒ 💡 아이콘 클릭

(또는 Alt + Enter)

![image.png](image%203.png)

2️⃣ 추가하고자 하는 **Wrap with Padding** 선택

3️⃣ padding 넣기!

```dart
class DicePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Row(
        children: <Widget>[
          Expanded(
            child: Padding(
              padding: const EdgeInsets.all(16.0),
              child: Image.asset('images/dice1.png'),
            ),
          ),
          Expanded(
            child: Padding(
              padding: const EdgeInsets.all(16.0),
              child: Image.asset('images/dice2.png'),
            ),
          ),
        ],
      ),
    );
  }
}
```

![image.png](image%204.png)

## 53. Adding Gesture Detection with Flutter Button Widgets

---

**1️⃣ 버튼으로 사용자가 주사위 누를 수 있게 하기**

⬆️ `Expanded` class와 dice 이미지 사이에 `TextButton`을 삽입하여 누를 수 있게 하자!

```dart
Expanded(
  child: Padding(
    padding: const EdgeInsets.all(16.0),
    child: TextButton(
      onPressed: () {
        // Handle button press
      },
      child: Image.asset('images/dice1.png'),
    ),
  ),
)
```

⚠️ `TextButton`에서 기본적으로 제공하는 padding 때문에 왼쪽 주사위가 더 작아 보임! ⇒ `Padding` 대신 `TextButton` 만 사용!

```dart
Expanded(
	child: **TextButton(
	  onPressed: () {
	    // print('left button got pressed');
	  },
	  child: Image.asset('images/dice1.png'),
	  ),
	),**
),
```

![image.png](image%205.png)

**2️⃣ 사용자가 버튼을 눌렀을 때 일어나는 일 설정하기**

⬆️ `onPressed`으로 설정하자!

```dart
// voidCallBack
onPressed: () {
}
```

---

```dart
Expanded(
  child: TextButton(
    **onPressed: () {
      print('left button got pressed');
    },**
    child: Image.asset('images/dice1.png'),
    ),
  ),
Expanded(
  child: TextButton(
    **onPressed: () {
      print('right button got pressed');
    },**
    child: Image.asset('images/dice2.png'),
  ),
),
```

```dart
I/flutter ( 6164): **left button got pressed**
I/flutter ( 6164): **right button got pressed**
I/flutter ( 6164): **left button got pressed**
```

![image.png](image%206.png)

## 54. [Dart] Functions - Part 1

---

- **Creating the function: `void getMilk() { //do something }`**
    - **Anonymous function: `() { //do something }`**
- **Calling the function: `getMilk();`**

## 55. Making the Dice Image Change Reactively

---

**2️⃣ 사용자가 버튼을 눌렀을 때 일어나는 일 설정하기**

⬆️ 변수를 선언하여 띄울 주사위 이미지 바꾸기

⚠️ Hot Reload를 눌렀을 때 다시 Build 되는 것은 `Widget build() {}` 이므로 변수를 선언할 때는 그 안에 선언해야 Hot Reload 시 변경 사항이 바로 반영된다!

```dart
class DicePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    **var leftDiceNumber = 5;**

    return Center(
      child: Row(
        children: <Widget>[
          Expanded(
            child: TextButton(
              onPressed: () {
                print('left button got pressed');
              },
              child: Image.asset(**'images/dice${leftDiceNumber}.png'**),
              ),
            ),
          Expanded(),
        ],
      ),
    );
  }
}

```

## 56. [Dart] Variables

---

```dart
void main() {
	**var myName = 'SeoHyun';**
	print(myName);  // SeoHyun
}
```

## 57. [Dart] Data Types

---

**Dart = Statically Typed Language**

```dart
void main() {
	var a = 'hello';
	~~a = 123;~~
}
```

**⬇️ Make Dart Dynamic ⇒ 데이터 타입이 고정되지 않은 변수를 만들 수 있다**

```dart
void main() {
	var a;
	
	a = 123;
	a = 'hello';
}
```

```dart
void main() {
	String a;
	int b;
	
	dynamic c = 123;
	c = 'hello';
	print(c)
}
```

<aside>

**예상치 못한 에러가 발생할 수 있으므로 Dynamic Data Type은 피하도록 하자!**

</aside>

## 58. Stateful vs. Stateless Widgets - What’s the Difference?

---

**3️⃣ 사용자의 상호작용에 맞추어 이미지 바꾸기**

1. hot relaod할 때마다 변수가 생성되면 안 되므로 build 밖에서 변수 선언
2. 사용자가 버튼을 누를 때 선언된 변수의 값이 변경되도록

```dart
class DicePage extends StatelessWidget {
  int leftDiceNumber = 5;
  @override
  Widget build(BuildContext context) {
    leftDiceNumber = 2;
		.
		.
		.
		
}
```

⇒ DicePage에 `This class (or a class that this class inherits from) is marked as '@immutable', but one or more of its instance fields aren't final: DicePage.leftDiceNumber` 에러가 뜸!

<aside>

### 💥 Stateful Widget, Stateless Widget

---

**Stateful Widget(**`stful`**): 위젯의 상태가 변하는 사용자 인터페이스를 만들 때 사용**

```dart
class  extends StatefulWidget {
  const ({super.key});

  @override
  State<> createState() => _State();
}

class _State extends State<> {
  @override
  Widget build(BuildContext context) {
    return const Placeholder();
  }
}
```

**Stateless Widget: 위젯의 상태가 변하지 않는 사용자 인터페이스를 만들 때 사용**

---

➡️ 기존에 Stateless Widget에 들어가 있던 코드를 Stateful Widget으로 옮기자!

```dart
**class DicePage extends StatefulWidget {
  const DicePage({super.key});

  @override
  State<DicePage> createState() => _DicePageState();
}

class _DicePageState extends State<DicePage> {
  int leftDiceNumber = 5;
  @override
  Widget build(BuildContext context) {
    leftDiceNumber = 2;

    return Center(
      child: Row(
        children: <Widget>[
          Expanded(
            child: TextButton(
              onPressed: () {
                print('left button got pressed');
              },
              child: Image.asset('images/dice${leftDiceNumber}.png'),
            ),
          ),
          Expanded(
            child: TextButton(
              onPressed: () {
                print('right button got pressed');
              },
              child: Image.asset('images/dice2.png'),
            ),
          ),
        ],
      ),
    );
  }
}**
```

---

**➡️ onPressed()를 통해 상태를 바꾸어주려면 상태를 업데이트한다는 걸 구체적으로 명시해 주어야 한다!**

- `setState`메소드가 호출되면 rebuild를 시작 → `build` 메소드 안에서 무엇이 바뀌었는지 확인 → 업데이트가 필요한 부분(사진을 불러오는 부분)에 적용

```dart
class DicePage extends StatefulWidget {
  const DicePage({super.key});

  @override
  State<DicePage> createState() => _DicePageState();
}

class _DicePageState extends State<DicePage> {
  **int leftDiceNumber = 1;**
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Row(
        children: <Widget>[
          Expanded(
            child: TextButton(
              onPressed: () {
                **setState(() {
                  leftDiceNumber = 6;
                  print('diceNumber = $leftDiceNumber');
                });**
              },
              child: Image.asset('images/dice$leftDiceNumber.png'),
            ),
          ),
          Expanded(
            child: TextButton(
              onPressed: () {
                print('right button got pressed');
              },
              child: Image.asset('images/dice2.png'),
            ),
          ),
        ],
      ),
    );
  }
}
```

![image.png](image%207.png)

</aside>

## 59. Randomising the Dice

---

**4️⃣ 주사위 숫자를 랜덤화하기**

<aside>

**dart: math library**

`import 'dart:math';` 

</aside>

```dart
**import 'dart:math';**
import 'package:flutter/material.dart';

void main() {
  runApp(
    MaterialApp(
      home: Scaffold(
        backgroundColor: Colors.red,
        appBar: AppBar(
          title: const Text('Dicee', style: TextStyle(color: Colors.white)),
          backgroundColor: Colors.red,
        ),
        body: DicePage(),
      ),
    ),
  );
}

class DicePage extends StatefulWidget {
  const DicePage({super.key});

  @override
  State<DicePage> createState() => _DicePageState();
}

class _DicePageState extends State<DicePage> {
  **int leftDiceNumber = 1;
  int rightDiceNumber = 1;**
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Row(
        children: <Widget>[
          Expanded(
            child: TextButton(
              onPressed: () {
                **setState(() {
                  leftDiceNumber = Random().nextInt(6) + 1;
                  print('diceNumber = $leftDiceNumber');
                });**
              },
              child: Image.asset('images/dice$leftDiceNumber.png'),
            ),
          ),
          Expanded(
            child: TextButton(
              onPressed: () {
                **setState(() {
                  rightDiceNumber = Random().nextInt(6) + 1;
                  print('diceNumber = $rightDiceNumber');
                });**
              },
              child: Image.asset('images/dice2.png'),
            ),
          ),
        ],
      ),
    );
  }
}
```

![image.png](image%208.png)